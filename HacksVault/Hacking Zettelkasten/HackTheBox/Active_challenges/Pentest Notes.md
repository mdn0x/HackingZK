- - - 
created : 12-10-2025 

Tags : #easy 

Category : Web
- - - 
# CHALLENGE DESCRIPTION

People-first web application projects are always a boring, like a note or a tic tac toe game, so I have created an upgraded version called 'Pentest Note'!
# Enumeration

Downloading the  files there is `data.sql` file which contains a username "user" and password "123"., we can use it to login:

![Pasted image 20251012171251.png](../../../2%20-%20Resources/Others/Flameshots/Pasted%20image%2020251012171251.png)

Looking at the code we find  `NotesController.java` file, where we can find a code vulnerability that allows [SQL Injection](../../../3%20-%20Tags/Hacking%20Concepts/SQL%20Injection.md):

```bash
@PostMapping("/note")
    public ResponseEntity < ? > noteByName(@RequestParam String name, HttpSession httpSession) {
        if (httpSession.getAttribute("username") == null) {
            return ResponseEntity.status(HttpStatus.UNAUTHORIZED).body("unauthorized");
        }
        if (name.contains("$") || name.toLowerCase().contains("concat")) {
            return ResponseEntity.status(HttpStatus.FORBIDDEN).body("Bad character in name :)");
        }
        String query = String.format("Select * from notes where name ='%s' ", name);
        List < Object[] > resultList = entityManager.createNativeQuery(query).getResultList();
        List < Map < String, Object >> result = new ArrayList < > ();
        for (Object[] row: resultList) {
            Map < String, Object > rowMap = new HashMap < > ();
            rowMap.put("ID", row[0]);
            rowMap.put("Name", row[1]);
            rowMap.put("Note", row[2]);
            result.add(rowMap);
        }
        return ResponseEntity.ok(result);
    }
```

Using the String.format method to create queries is insecure as it allows a malicious user to inject SQL code.
# Exploit

There is the possibility to execute java code through SQL aliases.

# ðŸ”’ Locked Content

This Challenge is currently **Active** on HackTheBox, according to the platform policies the write-up will be disclosed to the public after it's retirement.

If you need the full write-up, guides and scripts, you can support the project on [Buy Me a Coffee](https://buymeacoffee.com/mdn0x)